[
    {
        "a_contents": "//\n// Copyright (C) 2017 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n\n#ifndef UPDATE_ENGINE_PAYLOAD_CONSUMER_FILE_DESCRIPTOR_UTILS_H_\n#define UPDATE_ENGINE_PAYLOAD_CONSUMER_FILE_DESCRIPTOR_UTILS_H_\n\n#include <vector>\n\n#include <brillo/secure_blob.h>\n\n#include \"update_engine/payload_consumer/file_descriptor.h\"\n#include \"update_engine/update_metadata.pb.h\"\n\nnamespace chromeos_update_engine {\nnamespace fd_utils {\n\n// Copy a blocks from the |source| file to the |target| file and hash the\n// contents. The blocks to copy from the |source| to the |target| files are\n// specified by the |src_extents| and |tgt_extents| list of Extents, which\n// must have the same length in number of blocks. Stores the hash of the\n// copied blocks in Blob pointed by |hash_out| if not null. The block size\n// is passed as |block_size|. In case of error reading or writing, returns\n// false and the value pointed by |hash_out| is undefined.\n// The |source| and |target| files must be different, or otherwise |src_extents|\n// and |tgt_extents| must not overlap.\nbool CopyAndHashExtents(\n    FileDescriptorPtr source,\n    const google::protobuf::RepeatedPtrField<Extent>& src_extents,\n    FileDescriptorPtr target,\n    const google::protobuf::RepeatedPtrField<Extent>& tgt_extents,\n    uint32_t block_size,\n    brillo::Blob* hash_out);\n\n}  // namespace fd_utils\n}  // namespace chromeos_update_engine\n\n#endif  // UPDATE_ENGINE_PAYLOAD_CONSUMER_FILE_DESCRIPTOR_UTILS_H_",
        "b_contents": "//\n// Copyright (C) 2017 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n\n#ifndef UPDATE_ENGINE_PAYLOAD_CONSUMER_FILE_DESCRIPTOR_UTILS_H_\n#define UPDATE_ENGINE_PAYLOAD_CONSUMER_FILE_DESCRIPTOR_UTILS_H_\n\n#include <brillo/secure_blob.h>\n\n#include \"update_engine/payload_consumer/file_descriptor.h\"\n#include \"update_engine/update_metadata.pb.h\"\n\nnamespace chromeos_update_engine {\nnamespace fd_utils {\n\n// Copy blocks from the |source| file to the |target| file and hashes the\n// contents. The blocks to copy from the |source| to the |target| files are\n// specified by the |src_extents| and |tgt_extents| list of Extents, which\n// must have the same length in number of blocks. Stores the hash of the\n// copied blocks in Blob pointed by |hash_out| if not null. The block size\n// is passed as |block_size|. In case of error reading or writing, returns\n// false and the value pointed by |hash_out| is undefined.\n// The |source| and |target| files must be different, or otherwise |src_extents|\n// and |tgt_extents| must not overlap.\nbool CopyAndHashExtents(\n    FileDescriptorPtr source,\n    const google::protobuf::RepeatedPtrField<Extent>& src_extents,\n    FileDescriptorPtr target,\n    const google::protobuf::RepeatedPtrField<Extent>& tgt_extents,\n    uint32_t block_size,\n    brillo::Blob* hash_out);\n\n}  // namespace fd_utils\n}  // namespace chromeos_update_engine\n\n#endif  // UPDATE_ENGINE_PAYLOAD_CONSUMER_FILE_DESCRIPTOR_UTILS_H_",
        "base_contents": "",
        "res_region": "//\n// Copyright (C) 2017 The Android Open Source Project\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n\n#ifndef UPDATE_ENGINE_PAYLOAD_CONSUMER_FILE_DESCRIPTOR_UTILS_H_\n#define UPDATE_ENGINE_PAYLOAD_CONSUMER_FILE_DESCRIPTOR_UTILS_H_\n\n#include <brillo/secure_blob.h>\n\n#include \"update_engine/payload_consumer/file_descriptor.h\"\n#include \"update_engine/update_metadata.pb.h\"\n\nnamespace chromeos_update_engine {\nnamespace fd_utils {\n\n// Copy blocks from the |source| file to the |target| file and hashes the\n// contents. The blocks to copy from the |source| to the |target| files are\n// specified by the |src_extents| and |tgt_extents| list of Extents, which\n// must have the same length in number of blocks. Stores the hash of the\n// copied blocks in Blob pointed by |hash_out| if not null. The block size\n// is passed as |block_size|. In case of error reading or writing, returns\n// false and the value pointed by |hash_out| is undefined.\n// The |source| and |target| files must be different, or otherwise |src_extents|\n// and |tgt_extents| must not overlap.\nbool CopyAndHashExtents(\n    FileDescriptorPtr source,\n    const google::protobuf::RepeatedPtrField<Extent>& src_extents,\n    FileDescriptorPtr target,\n    const google::protobuf::RepeatedPtrField<Extent>& tgt_extents,\n    uint32_t block_size,\n    brillo::Blob* hash_out);\n\n}  // namespace fd_utils\n}  // namespace chromeos_update_engine\n\n#endif  // UPDATE_ENGINE_PAYLOAD_CONSUMER_FILE_DESCRIPTOR_UTILS_H_",
        "lookback": "// Copyright (C) 2017 The Android Open Source Project",
        "lookahead": "",
        "label": [
            "base",
            "one_side_deletion"
        ],
        "start_line": 0,
        "end_line": 101,
        "merge_gen_region": null,
        "confidence": 0.8613716959953308,
        "hesitated": true
    }
]